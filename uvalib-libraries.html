<link rel="import" href="../polymer/polymer.html">
<link rel="import" href="uvalib-library.html">
<link rel="import" href="../uvalib-models/uvalib-model-libraries.html">

<!--
`uvalib-libraries`
ui component that displays a listing of UVA libraries

@demo demo/index.html
-->

<dom-module id="uvalib-libraries">
  <template>
    <style>
      :host {
        display: block;
      }
    </style>

    <template is="dom-if" if="{{uuid}}" restamp>
      <uvalib-model-libraries data="{{data}}" filter="{{_filter}}"/>
    </template>
    <template is="dom-if" if="{{library}}" restamp>
      <uvalib-model-libraries data="{{data}}" filter="{{_filter}}"/>
    </template>
    <template is="dom-if" if="{{_dataPassed(uuid,library)}}" restamp>
      <uvalib-model-libraries data="{{data}}"/>
    </template>

    <template is="dom-repeat" items="{{data}}" as="lib">
      <uvalib-library object="[[lib]]"></uvalib-library>
    </template>
  </template>

  <script>
    Polymer({
      is: 'uvalib-libraries',

      properties: {
        /**
         * The uuid of the Library.  If specified will define which Library is being requested (takes priority over the library property)
         */
        uuid: {
          type: String,
          value: null
        },
        /**
         * The library that is being requested.  If the uuid property is not specified and the library property is, then this is used to define which Library is being requested.
         */
        library: {
          value: null,
          type: String,
        },
        /**
         * Data parsed to generate one or more library/lab content types.
         */
        data: {
          value: null,
          type: Array,
        },
        _filter: {
          type: Object,
          computed: '_makeFilter(uuid,library)'
        },

      },

      _dataPassed: function(uuid,library) {
        if (!uuid && !library) {
          return 1;
        } else {
          return 0;
        }
      },

      _makeFilter: function(uuid,title) {
        if (uuid) {
          return {uuid: uuid};
        } else if (title) {
          return {title: title};
        } else return {};
      }

    });
  </script>
</dom-module>
